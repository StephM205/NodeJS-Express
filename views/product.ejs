<%- include('layout/header') %>

    <div style="margin-bottom: 100px;" class="banner">
      <div class="text">
        <p class="new">S√°ch M·ªõi</p>
        <h1 class="title">Harry Potter v√† Chi·∫øc C·ªëc L·ª≠a</h1>
        <p class="description">
          Harry Potter v√† Chi·∫øc c·ªëc l·ª≠a l√† c√¢u chuy·ªán v·ªÅ nƒÉm th·ª© t∆∞ c·ªßa Harry
          Potter t·∫°i Hogwarts. ƒê√¢y l√† cu·ªën s√°ch m√† J.K. Rowling y√™u th√≠ch nh·∫•t
          trong s·ªë b·∫£y t·∫≠p.
        </p>
      </div>
      <div class="image">
        <img
          style="width: 450px; height: 600px;"
          src="https://cungdocsach.vn/wp-content/uploads/2019/10/Harry-Potter-v%C3%A0-chi%E1%BA%BFc-c%E1%BB%91c-l%E1%BB%ADa.gif"
          alt=""
        />
      </div>
    </div>

    <div class="container">
      
      <main>
        <aside class="sidebar">
          <div class="search-box">
            <input
              type="text"
              id="search"
              placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..."
              oninput="searchProducts()"
            />
            <button onclick="searchProducts()">üîç</button>
          </div>
          <div class="filter-price">
            <h3>T√¨m ki·∫øm theo gi√° ti·ªÅn</h3>
            <input style="width: 100%"
              type="range"
              id="priceRange"
              min="0"
              max="300000"
              value="200000"
              oninput="filterByPrice()"
            />
            <p>Gi√°: <span style="font-size: 15px; color: #000" id="priceValue">200000</span> VND</p>
          </div>
          <label style="margin-top: 10px" for="sort">Ch·ªçn l·ªçc: </label>
          <select id="sort" onchange="sortProducts()">
            <option value="high-low">Gi√° cao xu·ªëng th·∫•p</option>
            <option value="low-high">Gi√° th·∫•p ƒë·∫øn cao</option>
          </select>
        </aside>
        

        <div class="products" id="productList">
          <% products.forEach(product => { %>
          <div class="product" data-price="<%= product.price %>">
            <a style="text-decoration: none" href="/product/<%= product.id %>">
              <img
                src="images/<%=product.image %>"
                alt="<%= product.title %>"
              />
              <h3><%= product.title %></h3>
            </a>
            <button class="buy-button-product">
              <%= product.price %>VND ‚Äì Mua ngay
            </button>
          </div>
          <% }) %>
        </div>
      </main>
    </div>

    <%- include('layout/footer') %>

    <script>
      function searchProducts() {
        let searchQuery = document.getElementById("search").value.toLowerCase();
        let products = document.querySelectorAll(".product");
        products.forEach((product) => {
          let title = product.querySelector("h3").innerText.toLowerCase();
          product.style.display = title.includes(searchQuery)
            ? "block"
            : "none";
        });
      }

      function filterByPrice() {
        let maxPrice = document.getElementById("priceRange").value;
        document.getElementById("priceValue").innerText = maxPrice;
        let products = document.querySelectorAll(".product");
        products.forEach((product) => {
          let price = parseInt(product.getAttribute("data-price"));
          product.style.display = price <= maxPrice ? "block" : "none";
        });
      }

      function sortProducts() {
        let sortOrder = document.getElementById("sort").value;
        let productList = document.getElementById("productList");
        let products = Array.from(productList.children);
        products.sort((a, b) => {
          let priceA = parseInt(a.getAttribute("data-price"));
          let priceB = parseInt(b.getAttribute("data-price"));
          return sortOrder === "low-high" ? priceA - priceB : priceB - priceA;
        });
        products.forEach((product) => productList.appendChild(product));
      }
    </script>
  </body>
</html>
